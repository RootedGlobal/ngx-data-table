{"version":3,"file":"table.component.js","sourceRoot":"","sources":["../Users/narainsagar/Developer/ngx-data-table/src/components/table.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n\tComponent, Input, Output, EventEmitter, ContentChildren, QueryList,\n\tTemplateRef, ContentChild, ViewChildren, OnInit\n} from '@angular/core';\nimport { DataTableColumn } from './column.component';\nimport { DataTableRow } from './row.component';\nimport { DataTableParams } from '../types/data-table-params.type';\nimport { RowCallback } from '../types/row-callback.type';\nimport { DataTableTranslations } from '../types/data-table-translations.type';\nimport { defaultTranslations } from '../types/default-translations.type';\nimport { drag } from '../utils/drag';\nimport { TABLE_TEMPLATE } from './table.template';\nimport { TABLE_STYLE } from \"./table.style\";\n\n@Component({\n\tmoduleId: module.id + '',\n\tselector: 'data-table',\n\ttemplate: TABLE_TEMPLATE,\n\tstyles: [TABLE_STYLE]\n})\nexport class DataTable implements DataTableParams, OnInit {\n\n\tprivate _items: any[] = [];\n\n\t@Input() get items() {\n\t\treturn this._items;\n\t}\n\n\tset items(items: any[]) {\n\t\tthis._items = items;\n\t\tthis._onReloadFinished();\n\t}\n\n\t@Input() itemCount: number;\n\n\t// UI components:\n\n\t@ContentChildren(DataTableColumn) columns: QueryList<DataTableColumn>;\n\t@ViewChildren(DataTableRow) rows: QueryList<DataTableRow>;\n\t@ContentChild('dataTableExpand', { static: false }) expandTemplate: TemplateRef<any>;\n\n\t// One-time optional bindings with default values:\n\n\t@Input() headerTitle: string;\n\t@Input() header = true;\n\t@Input() pagination = true;\n\t@Input() pagination_range = false;\n\t@Input() pagination_limit = false;\n\t@Input() pagination_input = false;\n\t@Input() pagination_numbers = true;\n\t@Input() indexColumn = true;\n\t@Input() indexColumnHeader = '';\n\t@Input() rowColors: RowCallback;\n\t@Input() rowTooltip: RowCallback;\n\t@Input() selectColumn = false;\n\t@Input() multiSelect = true;\n\t@Input() substituteRows = true;\n\t@Input() expandableRows = false;\n\t@Input() translations: DataTableTranslations = defaultTranslations;\n\t@Input() selectOnRowClick = false;\n\t@Input() autoReload = true;\n\t@Input() showReloading = false;\n\t@Input() noDataMessage: string;\n\n\t// UI state without input:\n\n\tindexColumnVisible: boolean;\n\tselectColumnVisible: boolean;\n\texpandColumnVisible: boolean;\n\n\t// UI state: visible ge/set for the outside with @Input for one-time initial values\n\n\tprivate _sortBy: string;\n\tprivate _sortAsc = true;\n\n\tprivate _offset = 0;\n\tprivate _limit = 10;\n\n\t@Input()\n\tget sortBy() {\n\t\treturn this._sortBy;\n\t}\n\n\tset sortBy(value) {\n\t\tthis._sortBy = value;\n\t\tthis._triggerReload();\n\t}\n\n\t@Input()\n\tget sortAsc() {\n\t\treturn this._sortAsc;\n\t}\n\n\tset sortAsc(value) {\n\t\tthis._sortAsc = value;\n\t\tthis._triggerReload();\n\t}\n\n\t@Input()\n\tget offset() {\n\t\treturn this._offset;\n\t}\n\n\tset offset(value) {\n\t\tthis._offset = value;\n\t\tthis._triggerReload();\n\t}\n\n\t@Input()\n\tget limit() {\n\t\treturn this._limit;\n\t}\n\n\tset limit(value) {\n\t\tthis._limit = value;\n\t\tthis._triggerReload();\n\t}\n\n\t// calculated property:\n\n\t@Input()\n\tget page() {\n\t\treturn Math.floor(this.offset / this.limit) + 1;\n\t}\n\n\tset page(value) {\n\t\tthis.offset = (value - 1) * this.limit;\n\t}\n\n\tget lastPage() {\n\t\treturn Math.ceil(this.itemCount / this.limit);\n\t}\n\n\t// setting multiple observable properties simultaneously\n\n\tsort(sortBy: string, asc: boolean) {\n\t\tthis.sortBy = sortBy;\n\t\tthis.sortAsc = asc;\n\t}\n\n\t// init\n\n\tngOnInit() {\n\t\tthis._initDefaultValues();\n\t\tthis._initDefaultClickEvents();\n\t\tthis._updateDisplayParams();\n\n\t\tif (this.autoReload && this._scheduledReload == null) {\n\t\t\tthis.reloadItems();\n\t\t}\n\t}\n\n\tprivate _initDefaultValues() {\n\t\tthis.indexColumnVisible = this.indexColumn;\n\t\tthis.selectColumnVisible = this.selectColumn;\n\t\tthis.expandColumnVisible = this.expandableRows;\n\t}\n\n\tprivate _initDefaultClickEvents() {\n\t\tthis.headerClick.subscribe(tableEvent => this.sortColumn(tableEvent.column));\n\t\tif (this.selectOnRowClick) {\n\t\t\tthis.rowClick.subscribe(tableEvent => tableEvent.row.selected = !tableEvent.row.selected);\n\t\t}\n\t}\n\n\t// Reloading:\n\n\t_reloading = false;\n\n\tget reloading() {\n\t\treturn this._reloading;\n\t}\n\n\t@Output() reload = new EventEmitter();\n\n\treloadItems() {\n\t\tthis._reloading = true;\n\t\tthis.reload.emit(this._getRemoteParameters());\n\t}\n\n\tprivate _onReloadFinished() {\n\t\tthis._updateDisplayParams();\n\n\t\tthis._selectAllCheckbox = false;\n\t\tthis._reloading = false;\n\t}\n\n\t_displayParams = <DataTableParams>{}; // params of the last finished reload\n\n\tget displayParams() {\n\t\treturn this._displayParams;\n\t}\n\n\t_updateDisplayParams() {\n\t\tthis._displayParams = {\n\t\t\tsortBy: this.sortBy,\n\t\t\tsortAsc: this.sortAsc,\n\t\t\toffset: this.offset,\n\t\t\tlimit: this.limit\n\t\t};\n\t}\n\n\t_scheduledReload = null;\n\n\t// for avoiding cascading reloads if multiple params are set at once:\n\t_triggerReload() {\n\t\tif (this._scheduledReload) {\n\t\t\tclearTimeout(this._scheduledReload);\n\t\t}\n\t\tthis._scheduledReload = setTimeout(() => {\n\t\t\tthis.reloadItems();\n\t\t});\n\t}\n\n\t// event handlers:\n\n\t@Output() rowClick = new EventEmitter();\n\t@Output() rowDoubleClick = new EventEmitter();\n\t@Output() headerClick = new EventEmitter();\n\t@Output() cellClick = new EventEmitter();\n\n\tpublic rowClicked(row: DataTableRow, event) {\n\t\tthis.rowClick.emit({ row, event });\n\t}\n\n\tpublic rowDoubleClicked(row: DataTableRow, event) {\n\t\tthis.rowDoubleClick.emit({ row, event });\n\t}\n\n\tprivate headerClicked(column: DataTableColumn, event: Event) {\n\t\tif (!this._resizeInProgress) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tthis.headerClick.emit({ column, event });\n\t\t} else {\n\t\t\tthis._resizeInProgress = false; // this is because I can't prevent click from mousup of the drag end\n\t\t}\n\t}\n\n\tprivate cellClicked(column: DataTableColumn, row: DataTableRow, event: MouseEvent) {\n\t\tthis.cellClick.emit({ row, column, event });\n\t}\n\n\t// functions:\n\n\tprivate _getRemoteParameters(): DataTableParams {\n\t\tlet params = <DataTableParams>{};\n\n\t\tif (this.sortBy) {\n\t\t\tparams.sortBy = this.sortBy;\n\t\t\tparams.sortAsc = this.sortAsc;\n\t\t}\n\t\tif (this.pagination) {\n\t\t\tparams.offset = this.offset;\n\t\t\tparams.limit = this.limit;\n\t\t}\n\t\treturn params;\n\t}\n\n\tprivate sortColumn(column: DataTableColumn) {\n\t\tif (column.sortable) {\n\t\t\tlet ascending = this.sortBy === column.property ? !this.sortAsc : true;\n\t\t\tthis.sort(column.property, ascending);\n\t\t}\n\t}\n\n\tget columnCount() {\n\t\tlet count = 0;\n\t\tcount += this.indexColumnVisible ? 1 : 0;\n\t\tcount += this.selectColumnVisible ? 1 : 0;\n\t\tcount += this.expandColumnVisible ? 1 : 0;\n\t\tthis.columns.toArray().forEach(column => {\n\t\t\tcount += column.visible ? 1 : 0;\n\t\t});\n\t\treturn count;\n\t}\n\n\tpublic getRowColor(item: any, index: number, row: DataTableRow) {\n\t\tif (this.rowColors !== undefined) {\n\t\t\treturn (<RowCallback>this.rowColors)(item, row, index);\n\t\t}\n\t}\n\n\t// selection:\n\n\tselectedRow: DataTableRow;\n\tselectedRows: DataTableRow[] = [];\n\n\tprivate _selectAllCheckbox = false;\n\n\tget selectAllCheckbox() {\n\t\treturn this._selectAllCheckbox;\n\t}\n\n\tset selectAllCheckbox(value) {\n\t\tthis._selectAllCheckbox = value;\n\t\tthis._onSelectAllChanged(value);\n\t}\n\n\tprivate _onSelectAllChanged(value: boolean) {\n\t\tthis.rows.toArray().forEach(row => row.selected = value);\n\t}\n\n\tonRowSelectChanged(row: DataTableRow) {\n\n\t\t// maintain the selectedRow(s) view\n\t\tif (this.multiSelect) {\n\t\t\tlet index = this.selectedRows.indexOf(row);\n\t\t\tif (row.selected && index < 0) {\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t} else if (!row.selected && index >= 0) {\n\t\t\t\tthis.selectedRows.splice(index, 1);\n\t\t\t}\n\t\t} else {\n\t\t\tif (row.selected) {\n\t\t\t\tthis.selectedRow = row;\n\t\t\t} else if (this.selectedRow === row) {\n\t\t\t\tthis.selectedRow = undefined;\n\t\t\t}\n\t\t}\n\n\t\t// unselect all other rows:\n\t\tif (row.selected && !this.multiSelect) {\n\t\t\tthis.rows.toArray().filter(row_ => row_.selected).forEach(row_ => {\n\t\t\t\tif (row_ !== row) { // avoid endless loop\n\t\t\t\t\trow_.selected = false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t// other:\n\n\tget substituteItems() {\n\t\treturn Array.from({ length: this.displayParams.limit - this.items.length });\n\t}\n\n\t// column resizing:\n\n\tprivate _resizeInProgress = false;\n\n\tprivate resizeColumnStart(event: MouseEvent, column: DataTableColumn, columnElement: HTMLElement) {\n\t\tthis._resizeInProgress = true;\n\n\t\tdrag(event, {\n\t\t\tmove: (moveEvent: MouseEvent, dx: number) => {\n\t\t\t\tif (this._isResizeInLimit(columnElement, dx)) {\n\t\t\t\t\tcolumn.width = columnElement.offsetWidth + dx;\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tresizeLimit = 30;\n\n\tprivate _isResizeInLimit(columnElement: HTMLElement, dx: number) {\n\t\t/* This is needed because CSS min-width didn't work on table-layout: fixed.\n\t\t Without the limits, resizing can make the next column disappear completely,\n\t\t and even increase the table width. The current implementation suffers from the fact,\n\t\t that offsetWidth sometimes contains out-of-date values. */\n\t\tif ((dx < 0 && (columnElement.offsetWidth + dx) <= this.resizeLimit) ||\n\t\t\t!columnElement.nextElementSibling || // resizing doesn't make sense for the last visible column\n\t\t\t(dx >= 0 && ((<HTMLElement>columnElement.nextElementSibling).offsetWidth + dx) <= this.resizeLimit)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n}\n"]}